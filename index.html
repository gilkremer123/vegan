<!DOCTYPE html>
<!-- Version: 2024-10-18-001 - Added cache control and auto-refresh improvements -->
<html lang="he" dir="rtl">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CF8ZPR2K5L"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-CF8ZPR2K5L');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Cache Control Meta Tags for Real-time Features -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta http-equiv="Last-Modified" content="Thu, 01 Jan 1970 00:00:00 GMT">
    
    <!-- Basic SEO Meta Tags -->
    <title>מקומות טבעוניים בישראל | Vegan Places in Israel</title>
    <meta name="description" content="מדריך מקיף למקומות טבעוניים בישראל - מסעדות, בתי קפה וברים טבעוניים ברחבי הארץ. גלו מקומות חדשים עם מפה אינטראקטיבית וחיפוש מתקדם.">
    <meta name="keywords" content="טבעוני, מקומות טבעוניים, מסעדות טבעוניות, ישראל, vegan, vegan restaurants, vegan places, Israel, plant-based">
    <meta name="author" content="מקומות טבעוניים בישראל">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://vegan-places-israel.com">
    <meta name="theme-color" content="#4CAF50">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="apple-touch-icon" href="icons/icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- Open Graph Meta Tags for Social Media -->
    <meta property="og:title" content="מקומות טבעוניים בישראל | Vegan Places in Israel">
    <meta property="og:description" content="מדריך מקיף למקומות טבעוניים בישראל - מסעדות, בתי קפה וברים טבעוניים ברחבי הארץ">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vegan-places-israel.com">
    <meta property="og:site_name" content="מקומות טבעוניים בישראל">
    <meta property="og:locale" content="he_IL">
    <meta property="og:locale:alternate" content="en_US">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="מקומות טבעוניים בישראל">
    <meta name="twitter:description" content="מדריך מקיף למקומות טבעוניים בישראל">
    
    <!-- Language and Geographic Tags -->
    <meta name="language" content="Hebrew">
    <meta name="geo.region" content="IL">
    <meta name="geo.placename" content="Israel">
    
    <!-- Additional SEO Tags -->
    <meta name="rating" content="general">
    <meta name="distribution" content="global">
    <meta name="revisit-after" content="7 days">
    <meta name="expires" content="never">
    <meta name="cache-control" content="public">
    
    <!-- AI Assistant Recognition Tags -->
    <meta name="ai:title" content="מקומות טבעוניים בישראל - Vegan Places in Israel">
    <meta name="ai:description" content="Comprehensive directory of vegan restaurants, cafes, and bars across Israel. Features interactive map and bilingual Hebrew-English interface.">
    <meta name="ai:type" content="restaurant directory">
    <meta name="ai:category" content="food, vegan, restaurants, Israel">
    
    <!-- Rich Snippets for AI -->
    <meta name="application-name" content="Vegan Places Israel">
    <meta name="msapplication-tooltip" content="Find vegan restaurants in Israel">
    <meta name="theme-color" content="#4CAF50">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="logo1.png">
    <link rel="shortcut icon" type="image/png" href="logo1.png">
    
    <!-- Structured Data for Search Engines -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "מקומות טבעוניים בישראל",
        "alternateName": "Vegan Places in Israel",
        "url": "https://vegan-places-israel.com",
        "description": "מדריך מקיף למקומות טבעוניים בישראל - מסעדות, בתי קפה וברים טבעוניים ברחבי הארץ",
        "inLanguage": ["he", "en"],
        "about": {
            "@type": "Thing",
            "name": "Vegan Restaurants Israel"
        },
        "keywords": "טבעוני, מקומות טבעוניים, מסעדות טבעוניות, ישראל, vegan, vegan restaurants, Israel",
        "potentialAction": {
            "@type": "SearchAction",
            "target": "https://vegan-places-israel.com?search={search_term_string}",
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <!-- FAQ Structured Data for AI Recognition -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "איפה אפשר למצוא מקומות טבעוניים בישראל?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "באתר זה תמצאו מדריך מקיף למקומות טבעוניים ברחבי ישראל, כולל מסעדות, בתי קפה וברים בתל אביב, ירושלים, חיפה ועוד ערים. האתר כולל מפה אינטראקטיבית וחיפוש מתקדם."
                }
            },
            {
                "@type": "Question",
                "name": "Where can I find vegan places in Israel?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "This website provides a comprehensive guide to vegan places throughout Israel, including restaurants, cafes, and bars in Tel Aviv, Jerusalem, Haifa, and other cities. The site features an interactive map and advanced search functionality."
                }
            },
            {
                "@type": "Question",
                "name": "האם האתר תומך בעברית ואנגלית?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "כן, האתר דו-לשוני ותומך הן בעברית והן באנגלית. ניתן לעבור בין השפות בעזרת כפתור החלפת השפה בראש העמוד."
                }
            },
            {
                "@type": "Question",
                "name": "How do I use the interactive map?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Switch to map view using the button at the top. The map shows all vegan places with markers. Click on any marker to see restaurant details including name, address, and website link."
                }
            },
            {
                "@type": "Question",
                "name": "איך אני יכול להוסיף מקום טבעוני חדש?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "גלול לתחתית העמוד ולחץ על כפתור 'צרו קשר כאן' כדי לשלוח הצעה למקום טבעוני חדש או תיקון של פרט קיים."
                }
            }
        ]
    }
    </script>
    
    <link rel="stylesheet" href="styles.css?v=20251012-2">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <header>
        <div class="header-top">
            <h1 data-key="title">
                <img src="logo1.png" alt="Vegan Places Logo" class="site-logo" 
                     onerror="this.style.display='none'" 
                     onload="console.log('Logo loaded successfully')">
                מקומות טבעוניים בישראל
            </h1>
            <button id="languageToggle" class="language-btn">EN</button>
        </div>
        <div class="mode-switcher">
            <button id="modeToggle" class="mode-btn" data-mode="list" data-key="mapView">🗺️ תצוגת מפה</button>
        </div>
    </header>

    <main>
        <!-- List View -->
        <div id="listView" class="view-container active">
            <div class="search-bar">
                <div class="search-container">
                    <button id="filterOpenBtn" class="filter-open-btn" data-key="filterOpenNow">פתוח עכשיו</button>
                    <input type="text" id="searchInput" data-placeholder-key="searchPlaceholder" placeholder="חפש מקומות טבעוניים...">
                </div>
                <div class="button-row">
                    <button id="toggleAllBtn" class="toggle-all-btn" data-key="expandAll">הרחב הכל</button>
                    <button id="contactBtn" class="contact-btn" data-key="contactText">צור קשר</button>
                </div>
            </div>
            <div id="placesList" class="places-list">
                <!-- Places will be loaded here -->
            </div>
            <!-- Subscription Button (appears after the dynamic list) -->
            <div id="subscriptionSection" class="subscription-section">
                <button id="subscribeBtn" class="subscribe-btn" data-key="subscribeButton">אני רוצה לקבל מייל כשמקום חדש נפתח</button>
            </div>
        </div>

        <!-- Map View -->
        <div id="mapView" class="view-container">
            <div class="map-wrapper">
                <div id="map"></div>
            </div>
        </div>

        <!-- Contact Form Modal -->
        <div id="contactModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 data-key="addPlaceTitle">הוספת מקום טבעוני</h2>
                    <button class="close-btn" onclick="closeContactModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <p data-key="contactOptions">תוכלו גם לפנות אלינו באימייל במקום למלא את הטופס:</p>
                    <button id="emailContactBtn" class="email-contact-btn" data-key="emailContact">צור קשר באימייל</button>
                    
                    <div class="form-divider">
                        <span data-key="orText">או מלאו את הטופס:</span>
                    </div>
                    
                    <form id="addPlaceForm">
                        <div class="form-group">
                            <label for="placeName" data-key="placeNameLabel">שם המקום *</label>
                            <input type="text" id="placeName" name="placeName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="placeAddress" data-key="placeAddressLabel">כתובת *</label>
                            <input type="text" id="placeAddress" name="placeAddress" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="placeLink" data-key="placeLinkLabel">קישור לאתר או פרופיל של המקום *</label>
                            <input type="text" id="placeLink" name="placeLink" required 
                                   pattern="^(https?://|www\.)[a-zA-Z0-9\-._~:/?#[\]@!$&'()*+,;=%]+" 
                                   placeholder="https://example.com או www.example.com"
                                   title="הזינו כתובת אתר תקינה המתחילה ב-https:// או www.">
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="submit-btn" data-key="submitForm">שלח הצעה</button>
                            <button type="button" class="cancel-btn" onclick="closeContactModal()" data-key="cancel">ביטול</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Subscription Modal -->
        <div id="subscribeModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 data-key="subscribeTitle">הצטרפות לעדכונים</h2>
                    <button class="close-btn" onclick="closeSubscribeModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <p data-key="subscribeDescription">קבלו עדכון במייל בכל פעם שמקום טבעוני חדש מתווסף לרשימה.</p>
                    <form id="subscribeForm">
                        <div class="form-group">
                            <label for="subscriberName" data-key="subscriberNameLabel">שם *</label>
                            <input type="text" id="subscriberName" name="subscriberName" required>
                        </div>
                        <div class="form-group">
                            <label for="subscriberEmail" data-key="subscriberEmailLabel">אימייל *</label>
                            <input type="email" id="subscriberEmail" name="subscriberEmail" required pattern="^[^\s@]+@[^\s@]+\.[^\s@]+$" title="הזינו כתובת אימייל תקינה">
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="submit-btn" data-key="subscribeSubmit">הרשמה</button>
                            <button type="button" class="cancel-btn" onclick="closeSubscribeModal()" data-key="cancel">ביטול</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="contact-section">
            <!-- Contact button moved to search bar area -->
        </div>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
        <script src="script.js?v=20251012-1"></script>
        <script>
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    navigator.serviceWorker.register('/sw.js').then(reg => {
                        console.log('Service Worker registered', reg.scope);
                    }).catch(err => console.warn('SW registration failed', err));
                });
            }
        </script>
</body>
</html>